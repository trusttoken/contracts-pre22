#!/bin/bash

# print all commands as they execute
set -x

mkdir -p flat_contracts
truffle-flattener contracts/truecurrencies/TrueUSD.sol > flat_contracts/flat_tusd.sol
truffle-flattener contracts/truecurrencies/TrueAUD.sol > flat_contracts/flat_taud.sol
truffle-flattener contracts/truecurrencies/TrueCAD.sol > flat_contracts/flat_tcad.sol
truffle-flattener contracts/truecurrencies/mocks/TrueCADMock.sol > flat_contracts/flat_tcad_mock.sol
truffle-flattener contracts/truecurrencies/mocks/TrueUSDMock.sol > flat_contracts/flat_tusd_mock.sol
truffle-flattener contracts/truecurrencies/TrueGBP.sol > flat_contracts/flat_tgbp.sol
truffle-flattener contracts/truecurrencies/TrueHKD.sol > flat_contracts/flat_thkd.sol
truffle-flattener contracts/truecurrencies/Proxy/OwnedUpgradeabilityProxy.sol > flat_contracts/flat_OwnedUpgradeableProxy.sol
truffle-flattener contracts/truecurrencies/Admin/TokenController.sol > flat_contracts/flat_TokenController.sol
truffle-flattener contracts/truecurrencies/utilities/DepositAddressRegistrar.sol > flat_contracts/flat_depositAddressRegistrar.sol
truffle-flattener contracts/truecurrencies/utilities/PausedCurrencies.sol > flat_contracts/flat_PausedCurrencies.sol
truffle-flattener contracts/truecurrencies/Admin/MultisigOwner.sol > flat_contracts/flat_MultisigOwner.sol
truffle-flattener contracts/truecurrencies/Proxy/TimeOwnedUpgradeabilityProxy.sol > flat_contracts/flat_TimeOwnedUpgradeabilityProxy.sol
truffle-flattener contracts/truecurrencies/utilities/TokenFaucet.sol > flat_contracts/flat_TokenFaucet.sol

truffle-flattener contracts/truereward/utilities/FractionalExponents.sol > flat_contracts/flat_FractionalExponents.sol
truffle-flattener contracts/truereward/AssuredFinancialOpportunity.sol > flat_contracts/flat_AssuredFinancialOpportunity.sol
truffle-flattener contracts/truereward/AaveFinancialOpportunity.sol > flat_contracts/flat_AaveFinancialOpportunity.sol
truffle-flattener contracts/truereward/mocks/LendingPoolCoreMock.sol > flat_contracts/flat_LendingPoolCoreMock.sol
truffle-flattener contracts/truereward/FinancialOpportunity.sol > flat_contracts/flat_thkd.sol
truffle-flattener contracts/truereward/mocks/ATokenMock.sol > flat_contracts/flat_ATokenMock.sol
truffle-flattener contracts/truereward/mocks/ConfigurableFinancialOpportunityMock.sol > flat_contracts/flat_ConfigurableFinancialOpportunityMock.sol
truffle-flattener contracts/truereward/mocks/ConfigurableAaveFinancialOpportuniy.sol > flat_contracts/flat_ConfigurableAaveFinancialOpportuniy.sol

truffle-flattener contracts/deploy/DeployHelper.sol > flat_contracts/flat_DeployHelper.sol

truffle-flattener contracts/trusttokens/Registry/Registry.sol > flat_contracts/flat_Registry.sol
truffle-flattener contracts/trusttokens/Liquidator.sol > flat_contracts/flat_Liquidator.sol
truffle-flattener contracts/trusttokens/TrustToken.sol > flat_contracts/flat_TrustToken.sol
truffle-flattener contracts/trusttokens/StakedToken.sol > flat_contracts/flat_StakedToken.sol
